<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 6 Reference | Sinew: Simple R Package Documentation</title>
  <meta name="description" content="Sinew User Manual">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 6 Reference | Sinew: Simple R Package Documentation />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Sinew User Manual" />
  <meta name="github-repo" content="metrumresearchgroup/sinew" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Reference | Sinew: Simple R Package Documentation />
  
  <meta name="twitter:description" content="Sinew User Manual" />
  

<meta name="author" content="Jonathan Sidi, Metrum Research Group">


<meta name="date" content="2018-12-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="addins.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sinew User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Installation</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#cran"><i class="fa fa-check"></i><b>1.1</b> CRAN</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#development"><i class="fa fa-check"></i><b>1.2</b> Development</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="motive.html"><a href="motive.html"><i class="fa fa-check"></i><b>2</b> Motivation</a><ul>
<li class="chapter" data-level="2.1" data-path="motive.html"><a href="motive.html#quick-turnaraound"><i class="fa fa-check"></i><b>2.1</b> Quick Turnaraound</a></li>
<li class="chapter" data-level="2.2" data-path="motive.html"><a href="motive.html#working-example"><i class="fa fa-check"></i><b>2.2</b> Working Example</a><ul>
<li class="chapter" data-level="2.2.1" data-path="motive.html"><a href="motive.html#untangling-files"><i class="fa fa-check"></i><b>2.2.1</b> Untangling Files</a></li>
<li class="chapter" data-level="2.2.2" data-path="motive.html"><a href="motive.html#namespacing"><i class="fa fa-check"></i><b>2.2.2</b> Namespacing</a></li>
<li class="chapter" data-level="2.2.3" data-path="motive.html"><a href="motive.html#documentation"><i class="fa fa-check"></i><b>2.2.3</b> Documentation</a></li>
<li class="chapter" data-level="2.2.4" data-path="motive.html"><a href="motive.html#description"><i class="fa fa-check"></i><b>2.2.4</b> Description</a></li>
<li class="chapter" data-level="2.2.5" data-path="motive.html"><a href="motive.html#update-documentation"><i class="fa fa-check"></i><b>2.2.5</b> Update documentation</a></li>
<li class="chapter" data-level="2.2.6" data-path="motive.html"><a href="motive.html#oxygenize-and-check"><i class="fa fa-check"></i><b>2.2.6</b> Oxygenize and Check</a></li>
<li class="chapter" data-level="2.2.7" data-path="motive.html"><a href="motive.html#does-it-work"><i class="fa fa-check"></i><b>2.2.7</b> Does it work?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>3</b> Document Workflow</a></li>
<li class="chapter" data-level="4" data-path="sinewopts.html"><a href="sinewopts.html"><i class="fa fa-check"></i><b>4</b> Session level options</a><ul>
<li class="chapter" data-level="4.1" data-path="sinewopts.html"><a href="sinewopts.html#using-sinew_opts"><i class="fa fa-check"></i><b>4.1</b> Using sinew_opts</a></li>
<li class="chapter" data-level="4.2" data-path="sinewopts.html"><a href="sinewopts.html#using-_sinewconfig.yml"><i class="fa fa-check"></i><b>4.2</b> Using _sinewconfig.yml</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="addins.html"><a href="addins.html"><i class="fa fa-check"></i><b>5</b> Addins</a><ul>
<li class="chapter" data-level="5.1" data-path="addins.html"><a href="addins.html#createoxygen-static"><i class="fa fa-check"></i><b>5.1</b> createOxygen (Static)</a></li>
<li class="chapter" data-level="5.2" data-path="addins.html"><a href="addins.html#interactiveoxygen-interactive"><i class="fa fa-check"></i><b>5.2</b> InteractiveOxygen (Interactive)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="commandline.html"><a href="commandline.html"><i class="fa fa-check"></i><b>6</b> Reference</a><ul>
<li class="chapter" data-level="6.1" data-path="commandline.html"><a href="commandline.html#makeimport"><i class="fa fa-check"></i><b>6.1</b> makeImport</a><ul>
<li class="chapter" data-level="6.1.1" data-path="commandline.html"><a href="commandline.html#description-1"><i class="fa fa-check"></i><b>6.1.1</b> DESCRIPTION</a></li>
<li class="chapter" data-level="6.1.2" data-path="commandline.html"><a href="commandline.html#roxygen2"><i class="fa fa-check"></i><b>6.1.2</b> roxygen2</a></li>
<li class="chapter" data-level="6.1.3" data-path="commandline.html"><a href="commandline.html#importfrom-cutoff"><i class="fa fa-check"></i><b>6.1.3</b> importFrom cutoff</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="commandline.html"><a href="commandline.html#makeoxygen"><i class="fa fa-check"></i><b>6.2</b> makeOxygen</a><ul>
<li class="chapter" data-level="6.2.1" data-path="commandline.html"><a href="commandline.html#basic-usage"><i class="fa fa-check"></i><b>6.2.1</b> Basic Usage</a></li>
<li class="chapter" data-level="6.2.2" data-path="commandline.html"><a href="commandline.html#simple-call"><i class="fa fa-check"></i><b>6.2.2</b> Simple call</a></li>
<li class="chapter" data-level="6.2.3" data-path="commandline.html"><a href="commandline.html#add_fields"><i class="fa fa-check"></i><b>6.2.3</b> Add_fields</a></li>
<li class="chapter" data-level="6.2.4" data-path="commandline.html"><a href="commandline.html#cut"><i class="fa fa-check"></i><b>6.2.4</b> Cut</a></li>
<li class="chapter" data-level="6.2.5" data-path="commandline.html"><a href="commandline.html#seealso"><i class="fa fa-check"></i><b>6.2.5</b> Seealso</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="commandline.html"><a href="commandline.html#makeoxyfile"><i class="fa fa-check"></i><b>6.3</b> makeOxyFile</a></li>
<li class="chapter" data-level="6.4" data-path="commandline.html"><a href="commandline.html#moga"><i class="fa fa-check"></i><b>6.4</b> moga</a></li>
<li class="chapter" data-level="6.5" data-path="commandline.html"><a href="commandline.html#rmoxygen"><i class="fa fa-check"></i><b>6.5</b> rmOxygen</a></li>
<li class="chapter" data-level="6.6" data-path="commandline.html"><a href="commandline.html#makedictionary"><i class="fa fa-check"></i><b>6.6</b> makeDictionary</a></li>
<li class="chapter" data-level="6.7" data-path="commandline.html"><a href="commandline.html#tabular"><i class="fa fa-check"></i><b>6.7</b> tabular</a></li>
<li class="chapter" data-level="6.8" data-path="commandline.html"><a href="commandline.html#untangle"><i class="fa fa-check"></i><b>6.8</b> untangle</a></li>
<li class="chapter" data-level="6.9" data-path="commandline.html"><a href="commandline.html#prettyns"><i class="fa fa-check"></i><b>6.9</b> pretty_namespace</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Sinew: Simple R Package Documentation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="commandline" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Reference</h1>
<p><code>Sinew</code> can be used either as a command line tool or with a GUI interface through a <code>Shiny</code> gadget. In this chapter we will describe in detail all the command line functionality.</p>
<p>The goal of these functions is to reliably produce <code>CRAN</code> ready documentation and namespace managment that is compatible with <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a>.</p>
<p><strong>But at the end of the day this package is only meant to create a fleshed out skeleton and the actual content is up to the developer.</strong></p>

<div id="makeimport" class="section level2">
<h2><span class="header-section-number">6.1</span> makeImport</h2>
<p>When you are building a package to submit to CRAN and you need to have namespace calls for any function that is being imported. It is a pain to manually parse through the code looking for all the <em>::</em> and writing it in the <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a> header. This function does that for you.</p>
<p>You can write normally your script with the <strong>namespace</strong> calls and in the end run the function and you can paste the output into the header. (or use it as part of <a href="commandline.html#makeoxygen">makeOxygen</a> or <a href="commandline.html#makeoxyfile">makeOxyFile</a>)</p>
<p>The function is written to work on single files or whole directories, like a package <code>R</code> subdirectory.</p>
<p>The output can be set to return the format needed for either an <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a> header, <code>NAMESPACE</code> or the <code>DESCRIPTION</code></p>
<pre class="sourceCode r"><code class="sourceCode r">myDir &lt;-<span class="st"> &#39;../../R&#39;</span></code></pre>
<div id="description-1" class="section level3">
<h3><span class="header-section-number">6.1.1</span> DESCRIPTION</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeImport</span>(<span class="dt">script=</span>myDir,<span class="dt">format =</span> <span class="st">&#39;description&#39;</span>)</code></pre>
<p>To write the output directly into the Imports field of the <code>DESCRIPTION</code> file, specify path to <code>DESCRIPTION</code> in <code>desc_loc</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeImport</span>(myDir,<span class="dt">format =</span> <span class="st">&#39;description&#39;</span>, <span class="dt">desc_loc=</span><span class="st">&#39;&lt;PATH TO DESCRIPTION&gt;&#39;</span>)</code></pre>
</div>
<div id="roxygen2" class="section level3">
<h3><span class="header-section-number">6.1.2</span> roxygen2</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#single file</span>
<span class="kw">makeImport</span>(<span class="dt">script=</span><span class="kw">file.path</span>(myDir,<span class="st">&#39;makeImport.R&#39;</span>),<span class="dt">format =</span> <span class="st">&#39;oxygen&#39;</span>)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#whole directory</span>
<span class="kw">makeImport</span>(<span class="dt">script=</span>myDir,<span class="dt">format =</span> <span class="st">&#39;oxygen&#39;</span>)</code></pre>
</div>
<div id="importfrom-cutoff" class="section level3">
<h3><span class="header-section-number">6.1.3</span> importFrom cutoff</h3>
<p>Setting the parameter <code>cut</code> to an integer value allows for control of how many functions to list in a package before concatenating the <code>importFrom</code> to an import. This is useful when there are many functions being used throughout the package from the same library and it is practically the same as just importing the whole library</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#without cut</span>
<span class="kw">makeImport</span>(<span class="dt">script=</span><span class="kw">file.path</span>(myDir,<span class="st">&#39;oxygenAddin.R&#39;</span>),<span class="dt">format =</span> <span class="st">&#39;oxygen&#39;</span>)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#with cut</span>
<span class="kw">makeImport</span>(<span class="dt">script=</span><span class="kw">file.path</span>(myDir,<span class="st">&#39;oxygenAddin.R&#39;</span>),<span class="dt">format =</span> <span class="st">&#39;oxygen&#39;</span>,<span class="dt">cut=</span><span class="dv">2</span>)</code></pre>

</div>
</div>
<div id="makeoxygen" class="section level2">
<h2><span class="header-section-number">6.2</span> makeOxygen</h2>
<p>Function that returns the skeleton for <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a> documentation including title, description, return, import and other fields populated with information scraped from the function script.</p>
<div id="basic-usage" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Basic Usage</h3>
<p><code>makeOxygen</code> is the main function in the package. Running the default setting returns a skeleton with minimal required fields to run <code>devtools::check(build_args = '--as-cran')</code>: title, description, and param.</p>
<p>Adding Some Meat to the Bones…</p>
<p>The added value of sinew is that it scrapes the script and fills in many important holes in the documentation:</p>
<ul>
<li>param default values:
<ul>
<li>if a default value is set for a function parameter it will be added to the end <code>@param</code> line.</li>
</ul></li>
<li>import/importFrom
<ul>
<li>It is assumed that the developer is abiding by the <code>CRAN</code> rules and uses the proper namespace syntax package::function when calling functions in the script. The package scrapes the script with makeImport to create the proper calls for <code>@import</code> and <code>@importFrom</code> which are placed at the bottom of the output. The user has control the number of functions that are listed in importFrom package function1 [ function2 …] until only <code>@import</code> package is returned (more below).</li>
</ul></li>
<li>seealso
<ul>
<li>linking to other packages is also taken care of when adding the field <code>@seealso</code>. Any functions that are included in <code>@importFrom</code> will have a link to them by default.</li>
</ul></li>
</ul>
<p>Examples showing different parameter specification in makeOxygen</p>
</div>
<div id="simple-call" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Simple call</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxygen</span>(lm)</code></pre>
<pre><code>## #&#39; @title FUNCTION_TITLE
## #&#39; @description FUNCTION_DESCRIPTION
## #&#39; @param formula PARAM_DESCRIPTION
## #&#39; @param data PARAM_DESCRIPTION
## #&#39; @param subset PARAM_DESCRIPTION
## #&#39; @param weights PARAM_DESCRIPTION
## #&#39; @param na.action PARAM_DESCRIPTION
## #&#39; @param method PARAM_DESCRIPTION, Default: &#39;qr&#39;
## #&#39; @param model PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param x PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param y PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param qr PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param singular.ok PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param contrasts PARAM_DESCRIPTION, Default: NULL
## #&#39; @param offset PARAM_DESCRIPTION
## #&#39; @param ... PARAM_DESCRIPTION
## #&#39; @return OUTPUT_DESCRIPTION
## #&#39; @details DETAILS
## #&#39; @examples 
## #&#39; \dontrun{
## #&#39; if(interactive()){
## #&#39;  #EXAMPLE1
## #&#39;  }
## #&#39; }
## #&#39; @rdname lm
## #&#39; @export</code></pre>
</div>
<div id="add_fields" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Add_fields</h3>
<p>Control over which <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a> fields are added to the header is passed through <code>add_fields</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxygen</span>(lm, <span class="dt">add_fields =</span> <span class="kw">c</span>(<span class="st">&#39;author&#39;</span>))</code></pre>
<pre><code>## #&#39; @title FUNCTION_TITLE
## #&#39; @description FUNCTION_DESCRIPTION
## #&#39; @param formula PARAM_DESCRIPTION
## #&#39; @param data PARAM_DESCRIPTION
## #&#39; @param subset PARAM_DESCRIPTION
## #&#39; @param weights PARAM_DESCRIPTION
## #&#39; @param na.action PARAM_DESCRIPTION
## #&#39; @param method PARAM_DESCRIPTION, Default: &#39;qr&#39;
## #&#39; @param model PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param x PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param y PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param qr PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param singular.ok PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param contrasts PARAM_DESCRIPTION, Default: NULL
## #&#39; @param offset PARAM_DESCRIPTION
## #&#39; @param ... PARAM_DESCRIPTION
## #&#39; @return OUTPUT_DESCRIPTION
## #&#39; @author AUTHOR [AUTHOR_2]</code></pre>
</div>
<div id="cut" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Cut</h3>
<p>Passing <code>cut</code> to <code>makeOxygen</code> to return import package instead of <code>importFrom package function1 [function2 ...]</code> for packages that call more than the value assigned to cut.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxygen</span>(lm, <span class="dt">cut=</span><span class="dv">1</span>)</code></pre>
<pre><code>## #&#39; @title FUNCTION_TITLE
## #&#39; @description FUNCTION_DESCRIPTION
## #&#39; @param formula PARAM_DESCRIPTION
## #&#39; @param data PARAM_DESCRIPTION
## #&#39; @param subset PARAM_DESCRIPTION
## #&#39; @param weights PARAM_DESCRIPTION
## #&#39; @param na.action PARAM_DESCRIPTION
## #&#39; @param method PARAM_DESCRIPTION, Default: &#39;qr&#39;
## #&#39; @param model PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param x PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param y PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param qr PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param singular.ok PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param contrasts PARAM_DESCRIPTION, Default: NULL
## #&#39; @param offset PARAM_DESCRIPTION
## #&#39; @param ... PARAM_DESCRIPTION
## #&#39; @return OUTPUT_DESCRIPTION
## #&#39; @details DETAILS
## #&#39; @examples 
## #&#39; \dontrun{
## #&#39; if(interactive()){
## #&#39;  #EXAMPLE1
## #&#39;  }
## #&#39; }
## #&#39; @rdname lm
## #&#39; @export</code></pre>
</div>
<div id="seealso" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Seealso</h3>
<p>When calling <code>addfields('seealso')</code> the function will give a guess of which functions to add conditional on what value cut it set to. That is any function returned with importFrom will also have a seealso link created for it.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxygen</span>(lm,<span class="dt">add_fields =</span> <span class="st">&#39;seealso&#39;</span>)</code></pre>
<pre><code>## #&#39; @title FUNCTION_TITLE
## #&#39; @description FUNCTION_DESCRIPTION
## #&#39; @param formula PARAM_DESCRIPTION
## #&#39; @param data PARAM_DESCRIPTION
## #&#39; @param subset PARAM_DESCRIPTION
## #&#39; @param weights PARAM_DESCRIPTION
## #&#39; @param na.action PARAM_DESCRIPTION
## #&#39; @param method PARAM_DESCRIPTION, Default: &#39;qr&#39;
## #&#39; @param model PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param x PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param y PARAM_DESCRIPTION, Default: FALSE
## #&#39; @param qr PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param singular.ok PARAM_DESCRIPTION, Default: TRUE
## #&#39; @param contrasts PARAM_DESCRIPTION, Default: NULL
## #&#39; @param offset PARAM_DESCRIPTION
## #&#39; @param ... PARAM_DESCRIPTION
## #&#39; @return OUTPUT_DESCRIPTION</code></pre>

</div>
</div>
<div id="makeoxyfile" class="section level2">
<h2><span class="header-section-number">6.3</span> makeOxyFile</h2>
<p>Function authored by: Anton Grishin</p>
<p>While <a href="commandline.html#makeoxygen">makeOxygen</a> is the workhorse for the package it does only print out to the console or a object in the current environment. <code>makeOxyFile</code> is a wrapper function for <a href="commandline.html#makeoxygen">makeOxygen</a> in order to actively insert <a href="commandline.html#makeoxygen">makeOxygen</a> outputs into existing or new files. By default <code>makeOxyFile</code> will not overwrite existing files, but will make a copy of the file and name it <code>oxy-filename.R</code>.</p>
<p>An empty call will envoke the system file selection dialogue.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxyFile</span>()</code></pre>
<p>Single File</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxyFile</span>(<span class="st">&quot;./myRfunctions/utils.R&quot;</span>)</code></pre>
<p>Batch mode for a directory</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxyFile</span>(<span class="st">&quot;./myRfunctions&quot;</span>)</code></pre>
<p>Additional parameters to <a href="commandline.html#makeoxygen">makeOxygen</a> can be passed through</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">makeOxyFile</span>(<span class="st">&quot;./myRfunctions/utils.R&quot;</span>, <span class="dt">cut =</span> <span class="dv">5</span>)</code></pre>

</div>
<div id="moga" class="section level2">
<h2><span class="header-section-number">6.4</span> moga</h2>
<p>After initially getting the documentation just right there comes the endless task of package maintanance. Revising functions is a natural part of the workflow, but a collateral effect of updating script is that the documentation needs to be updated too. This can include changes to the parameter inputs (function formals) or switching the internal function dependency from on package to another.</p>
<p>This is where <code>moga</code> can help. <code>moga</code> is an acronym for <strong>make oxygen great again</strong>. <code>moga</code> will rerun cross check the current documentation of an <code>R</code> script and the current script itself and update/add any parameters/defaults/imports discrepancies. This allows the developer to focus on function improvment without having to interrupt the train of thought to focus on documentation.</p>
<p><code>moga</code> can print to console for dry runs or it can overwrite the current file.</p>
<p>The example below shows a function that a parameter (a) was added to the formals, and there is a value already in the <code>@return</code> field.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">readLines</span>(<span class="st">&#39;../moga_test_cli.R&#39;</span>)</code></pre>
<p>We see that the new parameter was added belows <code>@param v</code> and the <code>@return</code> field was preserved.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">moga</span>(<span class="dt">path =</span> <span class="st">&#39;../moga_test_cli.R&#39;</span>)</code></pre>
<p>If you need to force an existing field to have the default <code>sinew</code> value, then use the <code>force.fields</code> option</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">moga</span>(<span class="st">&#39;../moga_test_cli.R&#39;</span>,<span class="dt">force.fields =</span> <span class="st">&#39;return&#39;</span>)</code></pre>

</div>
<div id="rmoxygen" class="section level2">
<h2><span class="header-section-number">6.5</span> rmOxygen</h2>
<p>Function authored by: Anton Grishin</p>
<p>Strip <code>roxygen2</code> preambles from a file</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rmOxygen</span>(<span class="st">&quot;./myRfunctions/function1.R&quot;</span>)</code></pre>

</div>
<div id="makedictionary" class="section level2">
<h2><span class="header-section-number">6.6</span> makeDictionary</h2>
<p>This function takes the idea of <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a> templates, but repurposes their use. It creates an <code>R</code> file of all the unique <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a> parameter fields in a package <code>R</code> subdirectory. This serves a few functions:</p>
<ul>
<li>Creates a general template for regular use with <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a></li>
<li>Simple way to check that there are no redundant parameter descriptions and that they are consistent.</li>
<li>When present, this is used internally with ls_param to call parameter descriptions in bulk from a centralized template to populate makeOxygen skeletons.</li>
</ul>
<p>For example in the <a href="https://github.com/metrumresearchgroup/sinew/tree/gh-pages/man-roxygen">man-roxygen</a> there is a <code>Dictionary-1.R</code> file that was created by <code>makeDictionary</code>. Using <code>ls_param</code> a query is run on the dictionary to return the param fields that intersect with the formals call to the functions.</p>
<pre class="sourceCode r"><code class="sourceCode r">dict_loc &lt;-<span class="st"> &#39;https://github.com/metrumresearchgroup/sinew/blob/master/man-roxygen/Dictionary-1.R&#39;</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#without dictionary</span>
<span class="kw">makeOxygen</span>(makeImport)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#with dictionary</span>
<span class="kw">makeOxygen</span>(makeImport,<span class="dt">use_dictionary =</span> dict_loc)</code></pre>

</div>
<div id="tabular" class="section level2">
<h2><span class="header-section-number">6.7</span> tabular</h2>
<p>Utility function to convert a <code>data.frame</code> to <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html">roxygen2</a> tabular format</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cat</span>(sinew<span class="op">::</span><span class="kw">tabular</span>(mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]))</code></pre>
<pre><code>## #&#39; \tabular{rrrrr}{
##     #&#39; \strong{mpg} \tab \strong{cyl} \tab \strong{disp} \tab \strong{hp} \tab \strong{drat}\cr
##     #&#39; 21.0 \tab 6 \tab 160 \tab 110 \tab 3.90\cr
##     #&#39; 21.0 \tab 6 \tab 160 \tab 110 \tab 3.90\cr
##     #&#39; 22.8 \tab 4 \tab 108 \tab  93 \tab 3.85\cr
##     #&#39; 21.4 \tab 6 \tab 258 \tab 110 \tab 3.08\cr
##     #&#39; 18.7 \tab 8 \tab 360 \tab 175 \tab 3.15
## #&#39;}</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cat</span>(sinew<span class="op">::</span><span class="kw">tabular</span>(mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>],<span class="dt">header=</span><span class="ot">FALSE</span>))</code></pre>
<pre><code>## #&#39; \tabular{rrrrr}{
##     #&#39; 21.0 \tab 6 \tab 160 \tab 110 \tab 3.90\cr
##     #&#39; 21.0 \tab 6 \tab 160 \tab 110 \tab 3.90\cr
##     #&#39; 22.8 \tab 4 \tab 108 \tab  93 \tab 3.85\cr
##     #&#39; 21.4 \tab 6 \tab 258 \tab 110 \tab 3.08\cr
##     #&#39; 18.7 \tab 8 \tab 360 \tab 175 \tab 3.15
## #&#39;}</code></pre>

</div>
<div id="untangle" class="section level2">
<h2><span class="header-section-number">6.8</span> untangle</h2>
<p>Utility function that splits a <code>R</code> script with multiple functions into multiple single function <code>R</code> files. This is great for when you recieve endlessly long <code>R</code> scripts that you need to organize quickly.</p>
<p><code>untangle</code> can be used in conjunction with <a href="commandline.html#makeoxyfile">makeOxyFile</a> in batch mode to quickly turn around long <code>R</code> files into a <code>CRAN</code> ready package within minutes.</p>
<pre class="sourceCode r"><code class="sourceCode r">txt &lt;-<span class="st"> &quot;#some comment</span>
<span class="st">#&#39; @import utils</span>
<span class="st">yy &lt;- function(a=4){</span>
<span class="st"> utils::head(runif(10),a)</span>
<span class="st"> # a comment</span>
<span class="st">}</span>

<span class="st">v &lt;- 20</span>

<span class="st">#another comment</span>
<span class="st">#&#39; @import utils</span>
<span class="st">zz &lt;- function(v=10,a=3){</span>
<span class="st"> utils::head(runif(v),pmin(a,v))</span>
<span class="st">}</span>

<span class="st">zz(v)</span>

<span class="st">&quot;</span>
x &lt;-<span class="st"> </span><span class="kw">untangle</span>(<span class="dt">text =</span> txt)

<span class="kw">sapply</span>(x,cat,<span class="dt">sep=</span><span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>)

<span class="co">#$yy</span>
<span class="co"># #some comment</span>
<span class="co"># #&#39; @import utils</span>
<span class="co"># yy &lt;- function(a=4){</span>
<span class="co">#   utils::head(runif(10),a)</span>
<span class="co">#   # a comment</span>
<span class="co"># }</span>
<span class="co">#</span>
<span class="co">#$zz</span>
<span class="co"># #another comment</span>
<span class="co"># #&#39; @import utils</span>
<span class="co"># zz &lt;- function(v=10,a=3){</span>
<span class="co">#   utils::head(runif(v),pmin(a,v))</span>
<span class="co"># }</span>
<span class="co">#</span>
<span class="co">#$body</span>
<span class="co">#v &lt;- 20</span>
<span class="co">#</span>
<span class="co">#zz(v)</span></code></pre>
<p><img src="https://github.com/metrumresearchgroup/sinew/blob/gh-pages/Miscellaneous/untangle.gif?raw=true" /></p>

</div>
<div id="prettyns" class="section level2">
<h2><span class="header-section-number">6.9</span> pretty_namespace</h2>
<p>Autoappend namespace to functions in script by searchpath order. This function will search functions in the following order</p>
<ol style="list-style-type: decimal">
<li>global environment</li>
<li><a href="https://www.rdocumentation.org/packages/base/versions/3.4.1/topics/ns-load">loadedNamespaces</a> (loaded packages)</li>
<li><a href="https://www.rdocumentation.org/packages/Rdocumentation/versions/0.5/topics/help.search">help.search</a> (installed.packages)</li>
<li>online via the <a href="https://cran.r-project.org/web/packages/sos/index.html">sos</a> package (CRAN packages)</li>
</ol>
<p>The <code>sos</code> search is optional and is turned off by default.</p>
<pre class="sourceCode r"><code class="sourceCode r">txt &lt;-<span class="st"> &#39;#some comment</span>
<span class="st">yy &lt;- function(a=4){</span>
<span class="st">  head(runif(10),a)</span>
<span class="st">  # a comment</span>
<span class="st">}</span>

<span class="st">zz &lt;- function(v=10,a=8){</span>
<span class="st">  head(runif(v),a)</span>
<span class="st">}&#39;</span>

x &lt;-<span class="st"> </span>sinew<span class="op">::</span><span class="kw">pretty_namespace</span>(<span class="dt">text=</span>txt)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x</code></pre>
<pre><code>## $new_text
## character(0)</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="addins.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/metrumresearchgroup/sinew/blob/gh-pages/edit/master/06-commandline.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["sinew-book.pdf", "sinew-book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
